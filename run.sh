#!/usr/bin/env bash


# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\distillers\swin_distill_mlp\fmd_swin-b_distill_mlp_s_img_s3_s4.py


# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-s_distill_mlp_s_img_s3_s4.py'
# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-l_distill_mlp_b_img_s3_s4.py'
# CONFIG='configs/distillers/deit/fmd_deit-s_distill_mbv1_img_s3_s4.py'
# CONFIG='configs/distillers/deit/fmd_deit-s_distill_res50_img_s3_s4.py'
# CONFIG='configs/mobilenet_v2/mobilenet-v2_8xb32_in1k.py'
# CONFIG='configs/resnet/resnet50_8xb32_in1k_strong_aug_coslr_300.py'
# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\resnet\resnet50_8xb32_in1k_strong_aug_coslr_300.py
# CONFIG='configs/distillers/imagenet/fmdv2_swin-s_distill_res50_img_s3_s4.py'
# CONFIG='configs/distillers/swin/fmdv2_swin-b_distill_mbv2_img_s3_s4.py'
# CONFIG='configs/distillers/swin/fmdv2_swin-b_distill_mbv2_img_s3_s4.py'
# \distillers\swin\fmdv2_swin-b_distill_mbv2_img_s3_s4.py
# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\mlp_mixer\mlp-mixer-small-p16_64xb64_in1k.py
# CONFIG='configs/efficientnet/efficientnet-b3_8xb32_in1k.py'
# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\distillers\swin\fmdv2_swin-s_distill_res50_img_s3_s4.py
# CONFIG='configs/distillers/swin/fmdv2_swin-s_distill_res50_img_s3_s4.py'
# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\mobilenet_v2\mobilenet-v2_8xb32_in1k.py
# CONFIG='configs/mlp_mixer/mlp-mixer-small-p16_64xb64_in1k.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_vit-b_distill_mlp_b_img_s3_s4.py'
# CONFIG='configs/distillers/swin/fmdv2_swinv2-l_distill_res50_img_s3_s4_strong_aug.py'
# /code/fanjiawei/fanjiawei/code/cls_KD_remote/configs/distillers/swin_distill_mlp/fmd_swin-l_distill_deit-s_img_s3_s4.py
# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-l_distill_deit-s_img_s3_s4.py'


# CONFIG='configs/distillers/swin/fmdv2_swin-l_distill_bit_res50_img_s3_s4_strong_aug.py'



# CONFIG='configs/distillers/swin_distill_mlp/fmd_eva-l_distill_vit_b_img_s3_s4.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_eva-l_distill_vit_s_img_s3_s4.py'

# CONFIG='configs/eva/eva-02-b_in1k-224px.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-l_distill_deit-b_img_s3_s4.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_eva-l_distill_eva-02-s_img_336px_s3_s4.py'


# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-l_distill_swin-t_img_s3_s4.py'

# CONFIG='configs/distillers/swin/fmdv2_swin-l_distill_res152_img_s3_s4_strong_aug.py'

# CONFIG='configs/distillers/swin/fmdv2_swin-l_distill_mbv1_img_s3_s4.py'
# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-s_distill_deit-s_img_s3_s4.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-l_distill_convnext-t_img_s3_s4.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-l_distill_mlp_s_img_s3_s4.py'
# CONFIG='configs/deit/deit-base_pt-4xb256_p14_in1k.py'

# CONFIG='configs/deit/deit-base_pt-4xb256_p14_in1k.py'
# CONFIG='configs/mlp_mixer/mlp-mixer-base-p14_64xb64_in1k.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_eva-l_distill_res50_img_s3_s4.py'

CONFIG='configs/distillers/swin_distill_mlp/fmd_swin-l_distill_convnext-t_img_s3_s4.py'

# CONFIG='configs/distillers/swin_distill_mlp/fmd_eva-l_distill_mixer_b_img_s3_s4.py'

# CONFIG='configs/distillers/swin/fd_swin-s_distill_res50_img_s3_s4.py'

# CONFIG='configs/distillers/swin/fmdv2_swin-l_distill_mbv1_img_s3_s4.py'


# CONFIG='configs/distillers/swin/fmdv2_swin-l_distill_res50_img_s3_s4_strong_aug.py'

# CONFIG='configs/distillers/swin/fmdv2_swin-l_distill_res50_img_s3_s4_strong_aug_pro.py'

# CONFIG='configs/distillers/swin/fmdv2_swin-l_distill_res50_img_s3_s4.py'
# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\distillers\swin\fmdv2_swin-l_distill_res50_img_s3_s4_strong_aug.py
# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\distillers\swin\fmdv2_swin-b_distill_mbv2_img_s3_s4.py
echo $MLP_ROLE_INDEX
GPU=8

PYTHONPATH="$(dirname $0)/..":$PYTHONPATH \
python -m torch.distributed.launch \
    --nproc_per_node=$GPU \
    --master_addr=$MLP_WORKER_0_HOST \
    --node_rank=$MLP_ROLE_INDEX \
    --master_port=$MLP_WORKER_0_PORT \
    --nnodes=$MLP_WORKER_NUM\
    tools/train.py \
    $CONFIG \
    --launcher pytorch ${@:3}\
    # --master_addr tcp://${MLP_WORKER_0_HOST}:${MLP_WORKER_0_PORT}\
    # --num_machines ${MLP_WORKER_NUM}\
    # -d ${MLP_WORKER_GPU}\
    # --machine_rank ${MLP_ROLE_INDEX}\
    # --launcher pytorch ${@:3}

# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\distillers\swin\fmdv2_swin-s_distill_mbv1_img_s3_s4.py
# PYTHONPATH="$(dirname $0)/..":$PYTHONPATH \
# python tools/train.py \
#     $CONFIG \
#     --dist-url tcp://${MLP_WORKER_0_HOST}:${MLP_WORKER_0_PORT}\
#     --num_machines ${MLP_WORKER_NUM}\
#     -d ${MLP_WORKER_GPU}\
#     --machine_rank ${MLP_ROLE_INDEX}\
#     --launcher pytorch ${@:3}
# C:\Users\fanjiawe\OneDrive - Intel Corporation\Desktop\cls_KD_remote\configs\distillers\deit\fmd_swin-s_distill_res18_img_s3_s4.py
